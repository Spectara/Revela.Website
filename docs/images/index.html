<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Revela - Image Processing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Modern static site generator for photographers">
    <meta name="author" content="Spectara">
    <meta name="keywords" content="">
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Revela" />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    <link type="text/css" rel="stylesheet" media="all" href="../../_assets/main.css">
    <link type="text/css" rel="stylesheet" media="all" href="../../_assets/prism.css">
    <link type="text/css" rel="stylesheet" media="all" href="../../_assets/website.css">
</head>

<body>
    <input type="checkbox" id="nav-trigger" class="nav-trigger">

    <nav>
<section>
  <a href="../../about/">About</a>
</section>
<section>
  <h3><a href="../../docs/">Documentation</a></h3>
  <a href="../../docs/user-journey/">User Journey</a>
<div>
  <a href="../../docs/source-structure/">Source Structure</a>
  <a href="../../docs/source-structure/static-files/">Static Files</a>
</div>
  <a href="../../docs/pages/">Creating Pages</a>
  <a href="../../docs/images/" class="active">Image Processing</a>
  <a href="../../docs/sorting/">Sorting</a>
  <a href="../../docs/filtering/">Filter Galleries</a>
<div>
  <a href="../../docs/themes/">Theme Customization</a>
  <a href="../../docs/themes/website-example/">revela.website</a>
</div>
  <a href="../../docs/configuration/">Configuration</a>
<div>
  <a href="../../docs/plugins/">Plugins</a>
  <a href="../../docs/plugins/compression/">Static Compression</a>
  <a href="../../docs/plugins/statistics/">Statistics</a>
  <a href="../../docs/plugins/serve/">Dev Server</a>
  <a href="../../docs/plugins/source-onedrive/">OneDrive Source</a>
</div>
  <a href="../../docs/deployment/">Deployment</a>
</section>
    </nav>

    <header>
        <div>
            <h2>
                <label for="nav-trigger" title="Menu">
                    <span>Menu</span>
                    <span>i</span>
                    <span>i</span>
                    <span>i</span>
                </label>
                <a href="../../">Revela</a>
            </h2>
            <nav>
<a href="../../about/">About</a>
<a href="../../docs/" class="active">Documentation</a>
<a href="https://github.com/Spectara/Revela" title="View on GitHub" class="github-link">
    <svg viewBox="0 0 16 16" width="20" height="20" fill="currentColor" aria-hidden="true">
        <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path>
    </svg>
</a>
            </nav>
        </div>
    </header>

    <main>
<div class="docs-layout">
    <aside class="docs-sidebar">
        <nav>
            <ul>

                <li>
                    <a href="../../docs/user-journey/">User Journey</a>
                    <ul>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/source-structure/">Source Structure</a>
                    <ul>
                        <li><a href="../../docs/source-structure/static-files/">Static Files</a></li>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/pages/">Creating Pages</a>
                    <ul>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/images/" class="active">Image Processing</a>
                    <ul>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/sorting/">Sorting</a>
                    <ul>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/filtering/">Filter Galleries</a>
                    <ul>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/themes/">Theme Customization</a>
                    <ul>
                        <li><a href="../../docs/themes/website-example/">revela.website</a></li>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/configuration/">Configuration</a>
                    <ul>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/plugins/">Plugins</a>
                    <ul>
                        <li><a href="../../docs/plugins/compression/">Static Compression</a></li>
                        <li><a href="../../docs/plugins/statistics/">Statistics</a></li>
                        <li><a href="../../docs/plugins/serve/">Dev Server</a></li>
                        <li><a href="../../docs/plugins/source-onedrive/">OneDrive Source</a></li>
                    </ul>
                </li>

                <li>
                    <a href="../../docs/deployment/">Deployment</a>
                    <ul>
                    </ul>
                </li>
            </ul>
        </nav>
    </aside>
    <article class="docs-content">
        <h1>Image Processing</h1>
<p>Revela automatically processes your images into optimized web formats. This page covers configuration, incremental updates, and cleanup.</p>
<h2 id="image-configuration">Image Configuration</h2>
<p>Configure image formats and quality in <code>project.json</code>:</p>
<pre><code class="language-json">{
  &quot;generate&quot;: {
    &quot;images&quot;: {
      &quot;jpg&quot;: 90,
      &quot;webp&quot;: 85
    }
  }
}
</code></pre>
<p><strong>Supported formats:</strong></p>
<ul>
<li><code>jpg</code> - Universal compatibility (quality 1-100)</li>
<li><code>webp</code> - Smaller files, modern browsers (quality 1-100)</li>
<li><code>avif</code> - Smallest files, newest browsers (quality 1-100)</li>
</ul>
<p><strong>Recommendation:</strong> Start with just <code>jpg: 90</code> for compatibility. Add <code>webp</code> or <code>avif</code> later if needed.</p>
<h2 id="image-sizes">Image Sizes</h2>
<p>Sizes are defined by your theme. The default Lumina theme generates these widths:</p>
<pre><code>160, 320, 480, 640, 720, 960, 1280, 1440, 1920, 2560
</code></pre>
<p>These sizes are optimized for High-DPI displays (1.5x, 2x scaling).</p>
<p>Plus the <strong>original width</strong> for full-resolution lightbox view.</p>
<h2 id="generating-images">Generating Images</h2>
<pre><code class="language-bash"># Full generation
revela generate images

# Force regenerate all (ignore cache)
revela generate images --force
</code></pre>
<h2 id="incremental-processing">Incremental Processing</h2>
<p>Revela automatically detects what's missing and only generates those variants:</p>
<h3 id="adding-a-new-format">Adding a New Format</h3>
<pre><code class="language-bash"># Before: only jpg configured
# After: add webp to project.json

revela generate images
# â†’ Only webp files are created
# â†’ Existing jpg files are kept
</code></pre>
<h3 id="progress-display">Progress Display</h3>
<pre><code>image001.jpg  â–  â–  â–  â–  â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡
image002.jpg  â–  â–  â–  â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡
image003.jpg  â–  â–  â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡ â–¡
</code></pre>
<ul>
<li><strong>Green â– </strong> = Generated (new file)</li>
<li><strong>Gray â– </strong> = Skipped (already exists)</li>
<li><strong>Empty â–¡</strong> = Pending</li>
</ul>
<h2 id="cleaning-up">Cleaning Up</h2>
<p>When you change your image configuration (remove a format, change sizes), old files remain. Use <code>clean images</code> to remove them:</p>
<pre><code class="language-bash"># Preview what would be deleted
revela clean images --dry-run

# Actually delete unused files
revela clean images
</code></pre>
<h3 id="what-gets-cleaned">What Gets Cleaned</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Orphaned folders</strong></td>
<td>Source image was deleted</td>
<td><code>output/images/deleted-photo/</code></td>
</tr>
<tr>
<td><strong>Unused sizes</strong></td>
<td>Width no longer in theme config</td>
<td><code>*_480w.jpg</code> when 480 removed</td>
</tr>
<tr>
<td><strong>Unused formats</strong></td>
<td>Format disabled in project</td>
<td><code>*.webp</code> when webp removed</td>
</tr>
</tbody>
</table>
<h3 id="typical-workflow">Typical Workflow</h3>
<pre><code class="language-bash"># 1. Change config (remove webp)
# Edit project.json: remove &quot;webp&quot;: 85

# 2. Preview cleanup
revela clean images --dry-run
# â†’ Shows: 4220 webp files (852 MB)

# 3. Delete unused files
revela clean images
# â†’ Deleted: 4220 files (852 MB)

# 4. Verify (optional)
revela generate images
# â†’ Shows: 0 processed, 1153 cached
</code></pre>
<h2 id="low-quality-image-placeholders-lqip">Low-Quality Image Placeholders (LQIP)</h2>
<p>Revela generates <strong>CSS-only placeholders</strong> that display while images load. This creates a smooth loading experience without layout shifts.</p>
<h3 id="how-it-works">How It Works</h3>
<ol>
<li>During scan, Revela analyzes each image's average color and brightness pattern</li>
<li>This data is encoded into a compact integer (e.g., <code>-721311</code>)</li>
<li>The theme's CSS decodes this integer into gradient placeholders</li>
<li>When the image loads, it smoothly replaces the placeholder</li>
</ol>
<p><strong>Result:</strong> ~7 bytes per image instead of a separate LQIP file. No additional HTTP requests.</p>
<h3 id="configuration">Configuration</h3>
<p>LQIP is <strong>enabled by default</strong>. To disable it:</p>
<pre><code class="language-json">{
  &quot;generate&quot;: {
    &quot;images&quot;: {
      &quot;placeholder&quot;: {
        &quot;strategy&quot;: &quot;none&quot;
      }
    }
  }
}
</code></pre>
<h3 id="technical-details">Technical Details</h3>
<p>The CSS hash encodes:</p>
<ul>
<li><strong>Average color</strong> in Oklab color space (8 bits)</li>
<li><strong>3Ã—2 brightness grid</strong> as grayscale values (12 bits)</li>
</ul>
<p>The browser reconstructs this as radial gradients with blend modes, creating a blurred approximation of the image. Based on <a href="https://leanrada.com/notes/css-only-lqip/">Lean Rada's CSS-only LQIP technique</a>.</p>
<h2 id="best-practices">Best Practices</h2>
<div class="features-grid">
<h3 id="start-simple">ðŸš€ Start Simple</h3>
<p>Begin with <code>jpg: 90</code> only. Add webp/avif later when you need smaller files.</p>
<h3 id="incremental-updates">ðŸ”„ Incremental Updates</h3>
<p>Don't use <code>--force</code> unless necessary. Incremental processing is much faster.</p>
<h3 id="clean-after-config-changes">ðŸ§¹ Clean After Config Changes</h3>
<p>After removing formats or sizes, run <code>clean images</code> to free disk space.</p>
<h3 id="check-dry-run-first">ðŸ“Š Check Dry-Run First</h3>
<p>Always use <code>--dry-run</code> before <code>clean images</code> to preview what will be deleted.</p>
</div>

    </article>
</div>
    </main>

    <footer>
        <nav>
<section>
  <a href="../../about/">About</a>
</section>
<section>
  <h3><a href="../../docs/">Documentation</a></h3>
  <a href="../../docs/user-journey/">User Journey</a>
<div>
  <a href="../../docs/source-structure/">Source Structure</a>
  <a href="../../docs/source-structure/static-files/">Static Files</a>
</div>
  <a href="../../docs/pages/">Creating Pages</a>
  <a href="../../docs/images/" class="active">Image Processing</a>
  <a href="../../docs/sorting/">Sorting</a>
  <a href="../../docs/filtering/">Filter Galleries</a>
<div>
  <a href="../../docs/themes/">Theme Customization</a>
  <a href="../../docs/themes/website-example/">revela.website</a>
</div>
  <a href="../../docs/configuration/">Configuration</a>
<div>
  <a href="../../docs/plugins/">Plugins</a>
  <a href="../../docs/plugins/compression/">Static Compression</a>
  <a href="../../docs/plugins/statistics/">Statistics</a>
  <a href="../../docs/plugins/serve/">Dev Server</a>
  <a href="../../docs/plugins/source-onedrive/">OneDrive Source</a>
</div>
  <a href="../../docs/deployment/">Deployment</a>
</section>
        </nav>
        <div>
            Â© 2026 Spectara - <a href="https://revela.website" target="_blank" rel="noopener">powered by Revela</a>
        </div>
    </footer>

    <script src="../../_assets/main.js"></script>
    <script src="../../_assets/prism.js"></script>
</body>

</html>
